{
  "_id": "visma-vwworkflow2task",
  "type": "pipe",
  "source": {
    "type": "conditional",
    "alternatives": {
      "prod": {
        "type": "sql",
        "system": "visma",
        "schema": "BouvetNorgeAS",
        "table": "VWWorkflow2Task",
        "updated_column": "LastUpdate"
      },
      "test": {
        "type": "embedded",
        "entities": [{
          "_id": "136650",
          "ApproverId": 746,
          "Comment": "",
          "Created": "~t2019-04-29T08:54:56Z",
          "CreatedBy": "vismaadmin",
          "DocumentId": 80053,
          "DueDate": "~t2019-04-29T13:08:12Z",
          "LastUpdate": "~t2019-04-29T10:54:56Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 1,
          "TaskState": 10,
          "TaskUpdate": "~t2019-04-29T08:53:25Z",
          "UserName": "TASK.HANDLER",
          "Workflow2TaskId": 136650,
          "WorkflowId": 35986,
          "WorkflowLevel": 2,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136647",
          "ApproverId": 9999,
          "Created": "~t2019-04-29T08:54:55Z",
          "CreatedBy": "vismaadmin",
          "DocumentId": 80053,
          "DueDate": "~t2019-04-29T10:54:55Z",
          "LastUpdate": "~t2019-04-29T10:54:55Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 2,
          "TaskState": 60,
          "TaskUpdate": "~t2019-04-29T10:54:55Z",
          "UserName": "vismaadmin",
          "Workflow2TaskId": 136647,
          "WorkflowId": 35906,
          "WorkflowLevel": 4,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "112261",
          "ApproverId": 746,
          "Created": "~t2019-01-14T07:30:19Z",
          "CreatedBy": "vismaadmin",
          "DocumentId": 75787,
          "DueDate": "~t2019-01-14T08:30:19Z",
          "LastUpdate": "~t2019-01-14T08:30:19Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 2,
          "TaskState": 2,
          "TaskUpdate": "~t2019-01-14T08:30:19Z",
          "UserName": "WORKER.BEE",
          "Workflow2TaskId": 112261,
          "WorkflowId": 29753,
          "WorkflowLevel": 0,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "15449",
          "ApproverId": 746,
          "Comment": "Tatt kopi til fakturering.",
          "Created": "~t2017-10-12T10:01:48Z",
          "CreatedBy": "",
          "DocumentId": 61418,
          "DueDate": "~t2017-10-12T10:01:48Z",
          "LastUpdate": "~t2017-10-12T10:01:48Z",
          "LastUpdatedBy": "",
          "RowVersionNo": 9,
          "TaskState": 32,
          "TaskUpdate": "~t2017-10-12T07:51:28Z",
          "UserName": "some.one",
          "Workflow2TaskId": 15449,
          "WorkflowId": 4031,
          "WorkflowLevel": 2,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "12991",
          "ApproverId": 124,
          "Comment": "",
          "Created": "~t2017-10-03T11:17:03Z",
          "CreatedBy": "",
          "DocumentId": 61152,
          "DueDate": "~t2017-10-03T11:17:03Z",
          "LastUpdate": "~t2017-10-03T11:17:03Z",
          "LastUpdatedBy": "",
          "RowVersionNo": 5,
          "TaskState": 31,
          "TaskUpdate": "~t2017-10-03T09:13:37Z",
          "UserName": "someone.else",
          "Workflow2TaskId": 12991,
          "WorkflowId": 3402,
          "WorkflowLevel": 2,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136649",
          "ApproverId": 139,
          "Comment": "denne skal ut",
          "Created": "~t2019-04-29T08:54:56Z",
          "CreatedBy": "vismaadmin",
          "DocumentId": 80053,
          "DueDate": "~t2019-04-29T13:08:12Z",
          "LastUpdate": "~t2019-04-29T10:54:56Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 1,
          "TaskState": 50,
          "TaskUpdate": "~t2019-04-29T08:53:25Z",
          "UserName": "BAT.MAN",
          "Workflow2TaskId": 136649,
          "WorkflowId": 35986,
          "WorkflowLevel": 1,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136303",
          "ApproverId": 746,
          "Comment": "Kopier teksten nedenfor, velg Godkjenn og lim inn i kommentarfeltet.\r\nFyll inn der det er aktuelt og godkjenn:\r\n\r\nProsjektnr:\r\nFaktureres kunde:        Ja:      Nei:\r\nFørt i CT eller CATS:     Ja:      Nei:\r\nPåslag:\r\nBelastes avd:   \r\nAnnen info:\r\nDeltakerliste/Formål (hvis sosialt):\r\n",
          "Created": "~t2019-04-26T13:08:12Z",
          "CreatedBy": "WORKER.BEE",
          "DocumentId": 80053,
          "DueDate": "~t2019-04-26T15:08:12Z",
          "LastUpdate": "~t2019-04-29T10:54:55Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 4,
          "TaskState": 3,
          "TaskUpdate": "~t2019-04-26T15:08:12Z",
          "UserName": "ANOTHER.ONE",
          "Workflow2TaskId": 136303,
          "WorkflowId": 35906,
          "WorkflowLevel": 0,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136647",
          "ApproverId": 9999,
          "Created": "~t2019-04-29T08:54:55Z",
          "CreatedBy": "vismaadmin",
          "DocumentId": 80053,
          "DueDate": "~t2019-04-29T10:54:55Z",
          "LastUpdate": "~t2019-04-29T10:54:55Z",
          "LastUpdatedBy": "vismaadmin",
          "RowVersionNo": 2,
          "TaskState": 60,
          "TaskUpdate": "~t2019-04-29T10:54:55Z",
          "UserName": "vismaadmin",
          "Workflow2TaskId": 136647,
          "WorkflowId": 35906,
          "WorkflowLevel": 4,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136643",
          "ApproverId": 746,
          "Created": "~t2019-04-29T08:50:28Z",
          "CreatedBy": "CREATOR.OF.TASKS",
          "DocumentId": 80081,
          "DueDate": "~t2019-04-30T00:00:00Z",
          "LastUpdate": "~t2019-04-29T10:50:28Z",
          "LastUpdatedBy": "UP.DATER",
          "RowVersionNo": 3,
          "TaskState": 10,
          "TaskUpdate": "~t2019-04-29T10:50:28Z",
          "UserName": "",
          "Workflow2TaskId": 136643,
          "WorkflowId": 35984,
          "WorkflowLevel": 3,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }, {
          "_id": "136639",
          "ApproverId": 990,
          "Created": "~t2019-04-29T08:41:14Z",
          "CreatedBy": "SOME.CREATOR",
          "DocumentId": 80080,
          "DueDate": "~t2019-04-30T00:00:00Z",
          "LastUpdate": "~t2019-04-29T10:41:14Z",
          "LastUpdatedBy": "SOME.UPDATER",
          "RowVersionNo": 3,
          "TaskState": 10,
          "TaskUpdate": "~t2019-04-29T10:41:14Z",
          "UserName": "SOME.USERNAME",
          "Workflow2TaskId": 136639,
          "WorkflowId": 35983,
          "WorkflowLevel": 2,
          "rdf:type": "~:bouvet:visma-vwworkflow2task"
        }]
      }
    },
    "condition": "$ENV(node-env)"
  },
  "transform": {
    "type": "dtl",
    "rules": {
      "default": [
        ["copy", "*"],
        ["add", "rdf:type",
          ["ni", "bouvet:visma-vwworkflow2task"]
        ]
      ]
    }
  },
  "pump": {
    "cron_expression": "$ENV(visma_cron_fast)",
    "rescan_cron_expression": "$ENV(visma_rescan_cron)"
  }
}
