{
  "_id": "currenttime-subtask",
  "type": "pipe",
  "source": {
    "type": "conditional",
    "alternatives": {
      "prod": {
        "type": "sql",
        "system": "currenttime",
        "table": "subtask",
        "updated_column": "updatedate"
      },
      "test": {
        "type": "embedded",
        "entities": [{
          "_id": "0",
          "absence": 0,
          "accept": 1,
          "accounttypeid": 0,
          "contactid": 0,
          "employeeid": 0,
          "estetc": 0,
          "holiday": 0,
          "inexchange": 1,
          "inexpense": 0,
          "inhours": 0,
          "inplan": 1,
          "inprognosis": 0,
          "inrotation": 0,
          "maketimesheet": 1,
          "old_vat": 1,
          "owncompanyonly": 0,
          "percentinv": 100,
          "percentwork": 100,
          "plancategoryid": 1,
          "projectid": 0,
          "salaryid": 0,
          "salaryidlocked": 0,
          "subtaskactive": 1,
          "subtaskid": 0,
          "subtaskname": "Udefinert",
          "taskid": 0
        }, {
          "_id": "1",
          "absence": 0,
          "accept": 1,
          "accounttypeid": 0,
          "booking": 0,
          "contactid": 0,
          "employeeid": 190,
          "employeeidorig": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "estetc": 0,
          "esthours": 0,
          "estinfo": "",
          "holiday": 0,
          "icon": "",
          "inexchange": 1,
          "inexpense": 0,
          "inhours": 1,
          "inplan": 1,
          "inprognosis": 0,
          "inrotation": 0,
          "invoiceinfo": "",
          "maketimesheet": 1,
          "notetext": "",
          "old_vat": 0,
          "owncompanyonly": 0,
          "percentinv": 0,
          "percentwork": 100,
          "plancategoryid": 1,
          "projectid": 1,
          "ratemax": 0,
          "ratemin": 0,
          "salaryid": 0,
          "salaryidlocked": 1,
          "startdate": "~t2000-11-29T00:00:00Z",
          "subtaskactive": 1,
          "subtaskcatid": 0,
          "subtaskid": 1,
          "subtaskname": "Administrasjon",
          "subtaskref": "",
          "subtaskref2": "",
          "subtaskrefimport": "",
          "taskid": 1,
          "updateby": "Current admin",
          "updatedate": "~t2014-09-19T12:44:44Z"
        }, {
          "_id": "2",
          "absence": 0,
          "accept": 1,
          "accounttypeid": 0,
          "booking": 0,
          "contactid": 0,
          "employeeid": 190,
          "employeeidorig": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "estetc": 0,
          "esthours": 0,
          "estinfo": "",
          "holiday": 0,
          "icon": "",
          "inexchange": 1,
          "inexpense": 0,
          "inhours": 1,
          "inplan": 1,
          "inprognosis": 0,
          "inrotation": 0,
          "invoiceinfo": "",
          "maketimesheet": 1,
          "notetext": "",
          "old_vat": 0,
          "owncompanyonly": 0,
          "percentinv": 0,
          "percentwork": 100,
          "plancategoryid": 1,
          "projectid": 1,
          "ratemax": 0,
          "ratemin": 0,
          "salaryid": 0,
          "salaryidlocked": 1,
          "startdate": "~t2000-11-29T00:00:00Z",
          "subtaskactive": 1,
          "subtaskcatid": 0,
          "subtaskid": 2,
          "subtaskname": "Diverse interntid",
          "subtaskref": "",
          "subtaskref2": "",
          "subtaskrefimport": "",
          "taskid": 1,
          "updateby": "Current admin",
          "updatedate": "~t2014-09-19T12:44:44Z"
        }, {
          "_id": "3",
          "absence": 0,
          "accept": 1,
          "accounttypeid": 0,
          "booking": 0,
          "contactid": 0,
          "employeeid": 190,
          "employeeidorig": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "estetc": 0,
          "esthours": 0,
          "estinfo": "",
          "holiday": 0,
          "icon": "",
          "inexchange": 1,
          "inexpense": 0,
          "inhours": 1,
          "inplan": 1,
          "inprognosis": 0,
          "inrotation": 0,
          "invoiceinfo": "",
          "maketimesheet": 1,
          "notetext": "",
          "old_vat": 0,
          "owncompanyonly": 0,
          "percentinv": 0,
          "percentwork": 100,
          "plancategoryid": 1,
          "projectid": 1,
          "ratemax": 0,
          "ratemin": 0,
          "salaryid": 0,
          "salaryidlocked": 1,
          "startdate": "~t2000-11-29T00:00:00Z",
          "subtaskactive": 1,
          "subtaskcatid": 0,
          "subtaskid": 3,
          "subtaskname": "Ikke fakturerbar lunsj",
          "subtaskref": "",
          "subtaskref2": "",
          "subtaskrefimport": "",
          "taskid": 1,
          "updateby": "Current admin",
          "updatedate": "~t2014-09-19T12:44:44Z"
        }, {
          "_id": "4",
          "absence": 0,
          "accept": 1,
          "accounttypeid": 0,
          "booking": 0,
          "contactid": 0,
          "employeeid": 190,
          "employeeidorig": 190,
          "enddate": "~t2008-06-30T00:00:00Z",
          "estamount": 0,
          "estetc": 0,
          "esthours": 0,
          "estinfo": "",
          "holiday": 0,
          "icon": "",
          "inexchange": 1,
          "inexpense": 0,
          "inhours": 1,
          "inplan": 0,
          "inprognosis": 0,
          "inrotation": 0,
          "invoiceinfo": "",
          "maketimesheet": 1,
          "notetext": "",
          "old_vat": 0,
          "owncompanyonly": 0,
          "percentinv": 0,
          "percentwork": 100,
          "plancategoryid": 1,
          "projectid": 1,
          "ratemax": 0,
          "ratemin": 0,
          "salaryid": 0,
          "salaryidlocked": 1,
          "startdate": "~t2000-11-29T00:00:00Z",
          "subtaskactive": 0,
          "subtaskcatid": 0,
          "subtaskid": 4,
          "subtaskname": "IT-drift Felles",
          "subtaskref": "",
          "subtaskref2": "",
          "subtaskrefimport": "",
          "taskid": 1,
          "updateby": "Current admin",
          "updatedate": "~t2014-09-19T12:44:44Z"
        }]
      }
    },
    "condition": "$ENV(node-env)"
  },
  "transform": {
    "type": "dtl",
    "rules": {
      "default": [
        ["copy", "*"],
        ["make-ni", "currenttime-employee", "employeeid"],
        ["make-ni", "currenttime-task", "taskid"],
        ["make-ni", "currenttime-project", "projectid"],
        ["add", "rdf:type",
          ["ni", "bouvet:currenttime-subtask"]
        ]
      ]
    }
  },
  "pump": {
    "cron_expression": "$ENV(ct_cron_fast)",
    "rescan_cron_expression": "$ENV(ct_rescan_cron)"
  }
}
