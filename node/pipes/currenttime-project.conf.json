{
  "_id": "currenttime-project",
  "type": "pipe",
  "source": {
    "type": "conditional",
    "alternatives": {
      "prod": {
        "type": "sql",
        "system": "currenttime",
        "table": "project",
        "updated_column": "updatedate"
      },
      "test": {
        "type": "embedded",
        "entities": [{
          "_id": "0",
          "acceptid": 0,
          "budgetlevel": 1,
          "budgetrate": 0,
          "companyid": 0,
          "contactid": 0,
          "departmentid": 0,
          "employeeid": 1,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "esthours": 0,
          "estinfo": "",
          "icon": "",
          "invoiceinfo": "",
          "notetext": "Navn på den som fakturerer kommer her",
          "projcatid": 10,
          "projectactive": 0,
          "projectcompany": "",
          "projectid": 0,
          "projectname": "**Udefinert",
          "projectref": "",
          "projectrefimport": "",
          "projecttype": 4,
          "remaininghours": 0,
          "restr": 1,
          "shortname": "",
          "startdate": "~t2001-01-01T00:00:00Z",
          "updateby": "Max Manus:Win",
          "updatedate": "~t2004-02-18T00:00:00Z"
        }, {
          "_id": "1",
          "acceptid": 2,
          "budgetlevel": 3,
          "budgetrate": 0,
          "companyid": 50588,
          "contactid": 0,
          "departmentid": 0,
          "employeeid": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "esthours": 20,
          "estinfo": "",
          "icon": "",
          "invoiceinfo": "",
          "notetext": "",
          "projcatid": 10,
          "projectactive": 1,
          "projectcompany": "",
          "projectid": 1,
          "projectname": "(1) Interne timer",
          "projectref": "",
          "projectrefimport": "",
          "projecttype": 4,
          "remaininghours": 0,
          "restr": 0,
          "shortname": "",
          "startdate": "~t2011-01-01T00:00:00Z",
          "updateby": "Gal Gadot (958)",
          "updatedate": "~t2016-02-10T14:44:15Z"
        }, {
          "_id": "2",
          "acceptid": 2,
          "budgetlevel": 1,
          "budgetrate": 0,
          "companyid": 50588,
          "contactid": 0,
          "departmentid": 0,
          "employeeid": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "esthours": 0,
          "estinfo": "",
          "icon": "",
          "invoiceinfo": "",
          "notetext": "",
          "projcatid": 11,
          "projectactive": 1,
          "projectcompany": "",
          "projectid": 2,
          "projectname": "(2) Fravær",
          "projectref": "Absence",
          "projectrefimport": "",
          "projecttype": 6,
          "remaininghours": 0,
          "restr": 0,
          "shortname": "",
          "startdate": "~t2011-01-01T00:00:00Z",
          "updateby": "Max Manus (1)",
          "updatedate": "~t2015-05-04T10:33:45Z"
        }, {
          "_id": "3",
          "acceptid": 2,
          "budgetlevel": 1,
          "budgetrate": 0,
          "companyid": 50588,
          "contactid": 0,
          "departmentid": 0,
          "employeeid": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "esthours": 0,
          "estinfo": "",
          "icon": "",
          "invoiceinfo": "",
          "notetext": "",
          "projcatid": 11,
          "projectactive": 1,
          "projectcompany": "",
          "projectid": 3,
          "projectname": "(3) Ferie",
          "projectref": "Vacation",
          "projectrefimport": "",
          "projecttype": 5,
          "remaininghours": 0,
          "restr": 0,
          "shortname": "",
          "startdate": "~t2011-01-01T00:00:00Z",
          "updateby": "Bruce Wayne",
          "updatedate": "~t2014-10-01T13:46:34Z"
        }, {
          "_id": "4",
          "acceptid": 2,
          "budgetlevel": 1,
          "budgetrate": 0,
          "companyid": 50588,
          "contactid": 0,
          "departmentid": 0,
          "employeeid": 190,
          "enddate": "~t2020-12-31T00:00:00Z",
          "estamount": 0,
          "esthours": 0,
          "estinfo": "",
          "icon": "",
          "invoiceinfo": "",
          "notetext": "",
          "projcatid": 10,
          "projectactive": 1,
          "projectcompany": "",
          "projectid": 4,
          "projectname": "(4) Avspasering",
          "projectref": "",
          "projectrefimport": "",
          "projecttype": 7,
          "remaininghours": 0,
          "restr": 0,
          "shortname": "",
          "startdate": "~t2011-01-01T00:00:00Z",
          "updateby": "Bruce Wayne",
          "updatedate": "~t2014-10-01T13:46:48Z"
        }]
      }
    },
    "condition": "$ENV(node-env)"
  },
  "transform": {
    "type": "dtl",
    "rules": {
      "default": [
        ["copy", "*"],
        ["make-ni", "currenttime-department", "departmentid"],
        ["make-ni", "currenttime-employee", "employeeid"],
        ["make-ni", "currenttime-projecttype", "projecttype"],
        ["add", "rdf:type",
          ["ni", "bouvet:currenttime-project"]
        ]
      ]
    }
  },
  "pump": {
    "cron_expression": "$ENV(ct_cron_fast)",
    "rescan_cron_expression": "$ENV(ct_rescan_cron)"
  }
}
