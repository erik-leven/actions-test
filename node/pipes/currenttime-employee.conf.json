{
  "_id": "currenttime-employee",
  "type": "pipe",
  "source": {
    "type": "conditional",
    "alternatives": {
      "prod": {
        "type": "sql",
        "system": "currenttime",
        "blacklist": ["pinsalt", "salt", "pincode", "pwd"],
        "table": "employee",
        "updated_column": "updatedate"
      },
      "test": {
        "type": "embedded",
        "entities": [{
          "_id": "3656",
          "source": 0,
          "actcatid": 2,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Lena Sveen (713)",
          "createdate": "~t2018-05-22T15:16:29Z",
          "csaref": "2276",
          "departmentid": 100,
          "departmentid-ni": "~:currenttime-department:100",
          "email1": "test.testssond@bouvet.no",
          "employeddate": "~t2018-08-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3656,
          "firstname": "Test",
          "globalid": "~uafdbaa5c-7f66-4e8a-a7de-b9fdc2c17f15",
          "initials": "Test Testsson (2276)",
          "jobcodeid": 0,
          "lastname": "Testsson",
          "pursuant": "~:sesam:bouvet-employee",
          "pwdactive": true,
          "ssoref": "",
          "updateby": "Api",
          "updatedate": "~t2020-03-16T13:24:33.437Z",
          "username": "bouvet\\test.testsson",
          "usernamemobile": "test.testsson"
        }, {
          "_id": "3402",
          "actcatid": 4,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (1890)",
          "createdate": "~t2017-10-10T09:47:37Z",
          "csaref": "0001",
          "departmentid": 245,
          "departmentid-ni": "~:currenttime-department:245",
          "email1": "kari.norrman@mail.no",
          "employeddate": "~t2017-10-16T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3402,
          "firstname": "Max",
          "globalid": "~u2498abf5-df9c-44d1-b9f9-4af5788da652",
          "initials": "Max Manus ",
          "jobcodeid": 0,
          "lastname": "Manus",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (1890)",
          "updatedate": "~t2017-10-23T09:12:16Z",
          "username": "bouvet\\max.manus",
          "usernamemobile": "bouvet\\max.manus"
        }, {
          "_id": "3458",
          "actcatid": 4,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss2 (3241)",
          "createdate": "~t2017-11-24T12:30:33Z",
          "csaref": "0002",
          "departmentid": 243,
          "departmentid-ni": "~:currenttime-department:243",
          "email1": "ola.norskamenasd@bouvet.no",
          "employeddate": "~t2017-12-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3458,
          "firstname": "Ola",
          "globalid": "~u7f5a170c-5896-4d2a-b7d9-a1d13bf87766",
          "initials": "Ola Norrman",
          "jobcodeid": 0,
          "lastname": "Norrman ",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss2 (3241)",
          "updatedate": "~t2017-11-24T12:30:33Z",
          "username": "bouvet\\ola.norrman"
        }, {
          "_id": "3457",
          "actcatid": 4,
          "active": true,
          "allocatedprojects": true,
          "calendarconfigid": 0,
          "companyid": 49722,
          "costdepartmentid": 0,
          "createby": "Big Boss2 (3241)",
          "createdate": "~t2017-11-24T12:04:00Z",
          "csaref": "0003",
          "departmentid": 16,
          "departmentid-ni": "~:currenttime-department:16",
          "email1": "sven.svensson@bouvet.no",
          "employeddate": "~t2018-01-02T00:00:00Z",
          "employeecategoryid": 6,
          "employeeid": 3457,
          "firstname": "Sven ",
          "globalid": "~u6f0406ab-ab56-4a0a-80e7-334db474e128",
          "initials": "Sven Svensson",
          "jobcodeid": 0,
          "lastname": "Svensson",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss2 (3241)",
          "updatedate": "~t2017-11-24T12:05:15Z",
          "username": "bouvet\\sven.svensson"
        }, {
          "_id": "3456",
          "actcatid": 4,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (1890)",
          "createdate": "~t2017-11-24T11:47:53Z",
          "csaref": "0004",
          "departmentid": 241,
          "departmentid-ni": "~:currenttime-department:241",
          "email1": "max.manus@bouvet.no",
          "employeddate": "~t2018-03-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3456,
          "firstname": "Test",
          "globalid": "~ud677468c-8755-40ab-8731-aec2006163e1",
          "initials": "Test Tester",
          "jobcodeid": 0,
          "lastname": "Tester",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (1890)",
          "updatedate": "~t2017-11-24T11:47:53Z",
          "username": "bouvet\\max.manus"
        }, {
          "_id": "3401",
          "actcatid": 4,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (1890)",
          "createdate": "~t2017-10-10T09:00:25Z",
          "csaref": "0005",
          "departmentid": 241,
          "departmentid-ni": "~:currenttime-department:241",
          "email1": "bruce.wayne@bouvet.no",
          "employeddate": "~t2017-12-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3401,
          "firstname": "Bruce ",
          "globalid": "~u2ed3f5d6-24bb-4bf8-aafd-183dfe28f77d",
          "initials": "Bruce Wayne",
          "jobcodeid": 0,
          "lastname": "Wayne ",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (1890)",
          "updatedate": "~t2017-11-24T11:40:04Z",
          "username": "bouvet\\bruce.wayne"
        }, {
          "_id": "1625",
          "actcatid": 2,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createdate": "~t2014-10-29T11:27:00.173Z",
          "csaref": "0006",
          "departmentid": 286,
          "departmentid-ni": "~:currenttime-department:286",
          "email1": "abc@bouvet.no",
          "email2": "",
          "email3": "",
          "employeddate": "~t2011-04-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": null,
          "firstname": "Testina",
          "globalid": "~u0dc316ac-f1a5-4d01-b9c1-2f72179aa637",
          "initials": "Testina Testsen",
          "jobcodeid": 0,
          "lastname": "Testsen",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "updateby": "Big Boss (110)",
          "updatedate": "~t2017-11-24T14:24:44Z",
          "username": "bouvet\\testina.testsen",
          "usernamemobile": "bouvet\\testina.testsen"
        }, {
          "_id": "3455",
          "actcatid": 6,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (713)",
          "createdate": "~t2017-11-23T12:26:00Z",
          "csaref": "0007",
          "departmentid": 119,
          "departmentid-ni": "~:currenttime-department:119",
          "email1": "cba@bouvet.no",
          "employeddate": "~t2018-08-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3455,
          "firstname": "Karl Michael ",
          "globalid": "~u9e43cf8b-b7a5-4999-8c83-e4ced8c8739b",
          "initials": "Karl Michael Bergman",
          "jobcodeid": 0,
          "lastname": "Bergman",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (713)",
          "updatedate": "~t2017-11-23T12:26:00Z",
          "username": "bouvet\\karl.bergman"
        }, {
          "_id": "3454",
          "actcatid": 2,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (713)",
          "createdate": "~t2017-11-23T12:24:30Z",
          "csaref": "0008",
          "departmentid": 75,
          "departmentid-ni": "~:currenttime-department:75",
          "email1": "xyz@bouvet.no",
          "employeddate": "~t2018-08-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3454,
          "firstname": "Gal ",
          "globalid": "~u2c9fc2aa-06c1-4fb7-a0f1-32728be2fed8",
          "initials": "Gal Gadot",
          "jobcodeid": 0,
          "lastname": " Gadot",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (713)",
          "updatedate": "~t2017-11-23T12:24:30Z",
          "username": "bouvet\\gal.gadot"
        }, {
          "_id": "3453",
          "actcatid": 2,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss2 (713)",
          "createdate": "~t2017-11-23T12:22:53Z",
          "csaref": "0009",
          "departmentid": 89,
          "departmentid-ni": "~:currenttime-department:89",
          "email1": "fgh@bouvet.no",
          "employeddate": "~t2018-04-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3453,
          "firstname": "Bruce ",
          "globalid": "~u67a3496f-0baa-4fa2-ab9a-b5ef2e7c64c9",
          "initials": "Bruce Wayne",
          "jobcodeid": 0,
          "lastname": "Wayne",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss2 (713)",
          "updatedate": "~t2017-11-23T12:22:53Z",
          "username": "bouvet\\bruce.wayne"
        }, {
          "_id": "3452",
          "actcatid": 2,
          "active": true,
          "allocatedprojects": false,
          "calendarconfigid": 0,
          "companyid": 0,
          "costdepartmentid": 0,
          "createby": "Big Boss (713)",
          "createdate": "~t2017-11-23T12:19:51Z",
          "csaref": "0010",
          "departmentid": 121,
          "departmentid-ni": "~:currenttime-department:121",
          "email1": "klm@bouvet.no",
          "employeddate": "~t2018-03-01T00:00:00Z",
          "employeecategoryid": 3,
          "employeeid": 3452,
          "firstname": "Lynvingen ",
          "globalid": "~udee4f3eb-c7b6-46c1-8757-ddb251896f4f",
          "initials": "Lynvingen",
          "jobcodeid": 0,
          "lastname": "",
          "pursuant": "~:sesam:bouvet-employee",
          "rdf:type": "~:bouvet:currenttime-employee",
          "ssoref": "",
          "updateby": "Big Boss (713)",
          "updatedate": "~t2017-11-23T12:19:51Z",
          "username": "bouvet\\lynvingen"
        }]
      }
    },
    "condition": "$ENV(node-env)"
  },
  "transform": {
    "type": "dtl",
    "rules": {
      "default": [
        ["copy", "*"],
        ["make-ni", "currenttime-department", "departmentid"],
        ["add", "rdf:type",
          ["ni", "bouvet:currenttime-employee"]
        ],
        ["add", "pursuant",
          ["ni", "sesam:bouvet-employee"]
        ]
      ]
    }
  },
  "pump": {
    "cron_expression": "$ENV(ct_cron_fast)",
    "rescan_cron_expression": "$ENV(ct_rescan_cron)"
  }
}
